(this["webpackJsonpsheet-dashboard"]=this["webpackJsonpsheet-dashboard"]||[]).push([[0],{156:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionMenu}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__),_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47),_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48),_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(50),_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(49),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16),_szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(171),_szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_7__),_styles_actionmenu_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(172),_styles_actionmenu_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_styles_actionmenu_css__WEBPACK_IMPORTED_MODULE_8__),react_icons_fi__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(160),crypto_js_aes__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(76),crypto_js_aes__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(crypto_js_aes__WEBPACK_IMPORTED_MODULE_10__),crypto_js_sha256__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(157),crypto_js_sha256__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(crypto_js_sha256__WEBPACK_IMPORTED_MODULE_11__),crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(158),crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_12__),crypto_js_enc_utf8__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(159),crypto_js_enc_utf8__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(crypto_js_enc_utf8__WEBPACK_IMPORTED_MODULE_13__),mqtt__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(77),mqtt__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(mqtt__WEBPACK_IMPORTED_MODULE_14__),ActionMenu=function(_React$Component){Object(_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(ActionMenu,_React$Component);var _super=Object(_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__.a)(ActionMenu);function ActionMenu(_){var e;return Object(_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,ActionMenu),(e=_super.call(this,_)).broker="wss://test.mosquitto.org:8081",e}return Object(_home_ubuntu_Downloads_temp_luckysheet_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(ActionMenu,[{key:"createKey",value:function(){var _=crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_12___default.a.random(16);return crypto_js_sha256__WEBPACK_IMPORTED_MODULE_11___default()(_).toString().slice(0,9)}},{key:"handleHeaderClick",value:function(){this.props.editMode?this.props.setEditMode(!1):this.props.setEditMode(!0)}},{key:"handleUploadClick",value:function(){var _=this,e=mqtt__WEBPACK_IMPORTED_MODULE_14__.connect(this.broker);e.on("connect",(function(){var t=_.createKey(),n=t+"-channel",a=JSON.stringify(_.props.getData()),r=crypto_js_aes__WEBPACK_IMPORTED_MODULE_10___default.a.encrypt(a,t);e.publish(n,r.toString(),{retain:!0}),e.end();var o=t.substr(0,3)+"-"+t.substr(3,3)+"-"+t.substr(6,3);alert("Uploaded workbook. The key is ".concat(o))}))}},{key:"handleDownloadClick",value:function(){var _=this,e=prompt("Please enter the 9 character key:").replaceAll("-",""),t=e+"-channel",n=mqtt__WEBPACK_IMPORTED_MODULE_14__.connect(this.broker);n.on("connect",(function(){n.subscribe(t,(function(_){if(_)return alert("Unable to connect to MQTT channel"),void console.error(_)}))})),n.on("message",(function(a,r){console.log(r.toString());try{var o=crypto_js_aes__WEBPACK_IMPORTED_MODULE_10___default.a.decrypt(r.toString(),e),s=JSON.parse(o.toString(crypto_js_enc_utf8__WEBPACK_IMPORTED_MODULE_13___default.a));n.publish(t,"",{retain:!0}),_.props.saveData(s,!0)}catch(c){alert("Invalid key provided, please try again.")}n.end()}))}},{key:"handlRefreshClick",value:function handlRefreshClick(){eval("luckysheet.refreshFormula()")}},{key:"handleDeleteClick",value:function(){localStorage.clear(),this.props.saveData(null,!0)}},{key:"render",value:function(){var _=this,e=this.props.editMode?"Live Mode":"Edit Mode";return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.a,{menuButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.b,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_9__.a,{})}),children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.d,{onClick:function(){_.handleHeaderClick()},children:e}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.c,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.d,{onClick:function(){_.handleUploadClick()},children:"Upload"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.d,{onClick:function(){_.handleDownloadClick()},children:"Download"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.d,{onClick:function(){_.handlRefreshClick()},children:"Refresh"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.c,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_6__.d,{styles:{color:"red"},onClick:function(){_.handleDeleteClick()},children:"Delete data"})]})}}]),ActionMenu}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component)},166:function(_,e,t){},167:function(_,e,t){},168:function(_,e,t){},172:function(_,e,t){},177:function(_,e){},179:function(_,e){},189:function(_,e){},191:function(_,e){},218:function(_,e){},219:function(_,e){},224:function(_,e){},226:function(_,e){},233:function(_,e){},252:function(_,e){},274:function(_,e){},276:function(_,e){},291:function(_,e){},293:function(_,e){},317:function(_,e){},318:function(_,e){},324:function(_,e,t){"use strict";t.r(e);var n=t(6),a=t(0),r=t.n(a),o=t(45),s=t.n(o),c=(t(166),t(10)),i=(t(167),t(47)),u=t(48),l=t(50),d=t(49),E=(t(168),function(_){Object(l.a)(t,_);var e=Object(d.a)(t);function t(){var _;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(_=e.call.apply(e,[this].concat(a))).state={editMode:_.props.editMode},_}return Object(u.a)(t,[{key:"getColumnsWidth",value:function(_){for(var e=window.innerWidth,t=_.getSheetData()[0].length,n=Math.floor(e/t),a={},r=0;r<t;r++)a[r]=n;return a}},{key:"resizeColumnsToScreenWidth",value:function(_){var e=this.getColumnsWidth(_);_.setColumnWidth(e),document.getElementsByClassName("luckysheet-scrollbar-x")[0].children[0].style.width=window.innerWidth.toString()+"px"}},{key:"buildLuckysheet",value:function(){var _=this,e={},t=this.props.data,n=t[0].visibledatarow.length,a=t[0].visibledatacolumn.length;(e=this.props.editMode?{data:this.props.data,container:"luckysheet",enableAddRow:!1,enableAddBackTop:!1,showinfobar:!1,showstatisticBar:!1,showsheetbarConfig:{menu:!1},row:n,column:a}:{data:t,container:"luckysheet",enableAddRow:!1,enableAddBackTop:!1,showtoolbar:!1,showinfobar:!1,sheetFormulaBar:!1,showstatisticBar:!1,allowCopy:!1,showsheetbarConfig:{menu:!1},row:n,column:a,columnHeaderHeight:0,rowHeaderWidth:0}).hook={workbookCreateAfter:function(e){_.resizeColumnsToScreenWidth(r),_.props.editMode?r.showGridLines():r.hideGridLines()},updated:function(){_.props.saveData(r.getAllSheets())}};var r=window.luckysheet;r.create(e)}},{key:"componentDidUpdate",value:function(){this.buildLuckysheet()}},{key:"componentDidMount",value:function(){this.buildLuckysheet()}},{key:"render",value:function(){var _=this.props.editMode?"editMode":"liveMode";return Object(n.jsx)("div",{id:"luckysheet",className:_,style:{margin:"0px",padding:"0px",position:"absolute",width:"100%",bottom:"0px",left:"0px",top:"0px"}})}}]),t}(r.a.Component)),p=t(156),O=[{name:"Sheet1",color:"",status:"1",order:"0",data:[],config:{},index:0,visibledatarow:[[],[],[]],visibledatacolumn:[[],[],[]]}];var h=function(){var _=Object(a.useState)(l()),e=Object(c.a)(_,2),t=e[0],r=e[1],o=Object(a.useState)(!1),s=Object(c.a)(o,2),i=s[0],u=s[1];function l(){var _=localStorage.getItem("luckysheet-data");if(_)try{return JSON.parse(_)}catch(e){console.error("Error parsing localStorage data",e)}return O}function d(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==_&&(_=O);var t=JSON.stringify(_);localStorage.setItem("luckysheet-data",t),e&&r(l())}return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(E,{data:t,editMode:i,saveData:d}),Object(n.jsx)(p.a,{editMode:i,setEditMode:function(_){r(l()),u(_)},saveData:d,getData:l})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(n.jsx)(h,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(_){_.unregister()})).catch((function(_){console.error(_.message)}))}},[[324,1,2]]]);
//# sourceMappingURL=main.a41829e0.chunk.js.map